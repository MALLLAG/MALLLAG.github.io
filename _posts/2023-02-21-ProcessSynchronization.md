---
title: Process Synchronization
tags: OperatingSystem
comments: true
---

# 동기화란

## 동기화의 의미

동시다발적으로 실행되는 프로세스들은 서로 협력하며 영향을 주고 받기도 한다. <br>
이렇게 협력하여 실행되는 프로세스들은 실행 순서와 자원의 일관성을 보장해야 하기에 **동기화**되어야 한다.

**프로세스 동기화**란 프로세스들 사이의 수행 시기를 맞추는 것이다. <br>
프로세스들 사이의 수행 시기를 맞추는 것은 두 가지를 의미한다.

1. 실행 순서 제어 : 프로세스를 올바른 순서대로 실행하기
2. 상호 배제 : 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기

<br>

## 공유 자원과 임계 구역

프로세스들이 작업을 할 때 사용하는 공동의 자원을 **공유 자원**이라고 한다. <br>
**공유 자원**은 전역 변수, 파일, 입출력장치, 보조기억장치같은 것들이 될 수 있다.

**임계 구역**이란 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역을 의미한다. <br>
두 개 이상의 프로세스가 임계 구역에 진입하고자 하면 둘 중 하나는 대기해야 한다.

<img width="849" alt="25" src="https://github.com/MALLLAG/TIL/assets/87420630/0c806ef4-4f1f-4af3-aed4-2be84b8a3d04">

<br>

임계 구역은 두 개 이상의 프로세스가 동시에 실행되면 안되는 영역이지만, <br>
잘못된 실행으로 인해 여러 프로세스가 동시에 임계 구역의 코드를 실행하여 문제가 발생하는 경우가 있다. <br>
이를 **레이스 컨디션**이라고 한다.

운영체제는 이러한 임계 구역 문제를 세가지 원칙으로 해결한다.

1. 상호 배제 : 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 임계 구역에 들어올 수 없다.
2. 진행 : 임계 구역에 어떤 프로세스도 진입하지 않았다면 임계 구역에 진입하고자 하는 프로세스는 들어갈 수 있어야 한다.
3. 유한 대기 : 임계 구역에 들어오기 위해 무한정 대기해서는 안된다.

<br>
<hr>

# 동기화 기법

## 뮤텍스 락

**뮤텍스 락**은 동시에 접근해서는 안되는 자원에 동시에 접근하지 않도록 만드는 도구이다.

임계 구역에 진입하는 프로세스는 뮤텍스 락을 이용해 임계 구역에 자물쇠를 걸어두고 <br>
다른 프로세스는 임계 구역이 잠겨 있으면 기다리고, 잠겨 있지 않으면 진입할 수 있다.

뮤텍스 락은 하나의 전역 변수와 두 개의 함수로 구현할 수 있다.

- 자물쇠 역할 : 프로세스들이 공유하는 전역 변수 lock
- 임계 구역을 잠그는 역할 : acquire 함수
- 임계 구역의 잠금을 해제하는 역할 : release 함수

## 세마포

공유 자원이 여러 개 있는 경우 여러 개의 프로세스가 각각 공유 자원에 접근할 수 있어야 한다. <br>
**세마포**는 공유 자원이 여러 개인 상황에서도 적용가능한 동기화 도구이다.

세마포는 하나의 변수와 두 개의 함수로 구현할 수 있다.

- 사용 가능한 공유 자원의 개수를 나타내는 전역 변수 S
- 임계 구역에 들어가도 좋은지, 기다려야 할지를 알려주는 wait 함수
- 임계 구역 앞에서 기다리는 프로세스에 ‘이제 가도 좋다’고 신호를 주는 signal 함수

## 모니터

**모니터**는 공유 자원과 공유 자원에 접근하기 위한 인터페이스를 묶어 관리한다. <br>
그리고 프로세스는 반드시 인터페이스를 통해서만 공유 자원에 접근한다.

이를 위해 모니터를 통해 공유 자원에 접근하고자 하는 프로세스를 큐에 삽입하고, 큐에 삽입된 순서대로 공유 자원을 이용한다.

특정 조건을 바탕으로 프로세스를 실행하고 중단하기 위해 모니터는 **조건 변수**를 사용한다. <br>
이는 프로세스나 스레드의 실행 순서를 제어하기 위해 사용하는 특별한 변수이다.


